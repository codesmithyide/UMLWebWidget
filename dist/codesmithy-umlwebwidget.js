!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.CodeSmithyUMLWebWidget=e():t.CodeSmithyUMLWebWidget=e()}(window,(function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)i.d(n,o,function(e){return t[e]}.bind(null,o));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=24)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});class n{constructor(t){switch(t){case"top-center":this.type=o;break;case"top-right":this.type=s;break;case"right-center":this.type=r;break;case"bottom-right":this.type=a;break;case"bottom-center":this.type=l;break;case"bottom-left":this.type=h;break;case"left-center":this.type=c;break;case"top-left":this.type=g}}equals(t){return this.type===t.type}static get TopCenter(){return y}static get TopRight(){return p}static get RightCenter(){return u}static get BottomRight(){return d}static get BottomCenter(){return m}static get BottomLeft(){return x}static get LeftCenter(){return f}static get TopLeft(){return P}}e.ConnectionPointPosition=n;let o=0,s=1,r=2,a=3,l=4,h=5,c=6,g=7,y=new n("top-center"),p=new n("top-right"),u=new n("right-center"),d=new n("bottom-right"),m=new n("bottom-center"),x=new n("bottom-left"),f=new n("left-center"),P=new n("top-left")},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(3);var o=Symbol();e.DiagramElement=class{constructor(t,e,i){this.type=e,this.id=i,this.layers=new n.SVGLayerSet(t),this.uptodate=!1,this[o]={x:0,y:0}}getLayers(){return this.update(),this.layers}get x(){return this[o].x}get y(){return this[o].y}move(t,e){this.uptodate=!1,this[o].x=t,this[o].y=e}getConnectionPointsRectangle(){return this.update(),this.doGetConnectionPointsRectangle()}update(){this.uptodate||(this.doUpdate(),this.uptodate=!0)}doUpdate(){}doGetConnectionPointsRectangle(){return null}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(1),o=i(0);class s extends n.DiagramElement{constructor(t,e,i,n){super(t,"connectionpoint",null),this.errors=n,this.element=e,this.position=i}setPosition(t){this.position=t;let e=0,i=0,n=this.element.getConnectionPointsRectangle();if(null!=n)switch(this.position){case o.ConnectionPointPosition.TopCenter:e=n.cx,i=n.y;break;case o.ConnectionPointPosition.RightCenter:e=n.x+n.width,i=n.cy;break;case o.ConnectionPointPosition.BottomCenter:e=n.cx,i=n.y+n.height;break;case o.ConnectionPointPosition.LeftCenter:e=n.x,i=n.cy}else this.errors.assertDebug(!1);this.move(e,i)}}e.ConnectionPoint=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(5);e.SVGLayerSet=class{constructor(t){this.svg=t,this.layers={}}getLayer(t){return this.layers[t]}createLayer(t){let e=new n.SVGLayer(this.svg);return this.layers[t]=e,e}merge(t){let e=this;Object.keys(e.layers).forEach((function(i){e.layers[i].merge(t.layers[i])}))}clearEachLayer(){let t=this;Object.keys(t.layers).forEach((function(e){t.layers[e].clear()}))}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.SVGUtils=class{static Rectangle(t,e,i,n,o){let s=t.rect(n,o).move(e,i);return s.id(null),s}static Line(t,e,i,n,o){let s=t.line(e,i,n,o);return s.id(null),s}static Polygon(t,e){let i=t.polygon(e);return i.id(null),i}static Text(t,e,i,n){let o=t.text(n).move(e,i);return o.id(null),o}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.SVGLayer=class{constructor(t){this.svg=t,this.defs=[]}group(t){let e=this.svg.defs().group();return t?e.id(t):e.id(null),this.defs.push(e),e}circle(t){let e=this.svg.defs().circle(t);return e.id(null),this.defs.push(e),e}line(t,e,i,n){let o=this.svg.defs().line(t,e,i,n);return o.id(null),this.defs.push(o),o}polygon(t){let e=this.svg.defs().polygon(t);return e.id(null),this.defs.push(e),e}rect(t,e){let i=this.svg.defs().rect(t,e);return i.id(null),this.defs.push(i),i}text(t){let e=this.svg.defs().text(t);return e.id(null),this.defs.push(e),e}write(t){let e=this;null==t&&(t=e.svg),e.defs.forEach((function(e){t.add(e)}))}merge(t){this.defs=this.defs.concat(t.defs)}clear(){this.defs.forEach((function(t){t.remove()})),this.defs.length=0}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Errors=class{constructor(t){this.buildType=t}assertAlways(t){if(!t)throw console.error("Assertion failed"),window.alert("Assertion failed"),new Error}assertDebug(t){0==this.buildType&&this.assertAlways(t)}};class n extends Error{}e.UMLWebWidgetError=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.IDGenerator=class{constructor(t){this.prefix=t}createID(t){return this.prefix+"--"+t}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Settings=class{constructor(t){this.width=600,this.height=200,this.canMove=!1,this.canResize=!1,this.logLevel="none",this.buildType=1,t&&(t.width&&(this.width=t.width),t.height&&(this.height=t.height),t.interactive&&t.interactive.canMove&&(this.canMove=t.interactive.canMove),null!=t.logLevel&&(this.logLevel=t.logLevel))}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Style=class{constructor(){this.style=new Map,this.style.set("defaults",{"margin-left":12,"margin-right":12,"margin-top":9,"margin-bottom":9}),this.style.set("codesmithy-uml-diagram__classtemplate",{"margin-right":15,"margin-top":12}),this.style.set("classtemplate__parameters-compartment",{"margin-left":8,"margin-right":8,"margin-top":4,"margin-bottom":4}),this.style.set("lifeline",{"execution-specification-bar-width":8,"execution-specification-bar-overhang":5,"execution-specification-bar-margin":15})}getTopMargin(t){return this.getValueOrDefault(this,t,"margin-top")}getBottomMargin(t){return this.getValueOrDefault(this,t,"margin-bottom")}getLeftMargin(t){return this.getValueOrDefault(this,t,"margin-left")}getRightMargin(t){return this.getValueOrDefault(this,t,"margin-right")}getExecutionSpecificationBarWidth(){return this.style.get("lifeline")["execution-specification-bar-width"]}getExecutionSpecificationBarOverhang(){return this.style.get("lifeline")["execution-specification-bar-overhang"]}getExecutionSpecificationBarMargin(){return this.style.get("lifeline")["execution-specification-bar-margin"]}getValueOrDefault(t,e,i){return t.style.get(e)&&t.style.get(e)[i]?t.style.get(e)[i]:t.style.get("defaults")[i]}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(8),o=i(9),s=i(11),r=i(12),a=i(14),l=i(15),h=i(16),c=i(18),g=i(19),y=i(20),p=i(21),u=i(22),d=i(23),m=i(7),x=i(6);e.Diagram=class{constructor(t){this.settings=new n.Settings(t),this.errors=new x.Errors(this.settings.buildType),this.log=new d.Log(this.settings.logLevel),this.metrics=new u.Metrics,this.diagramDescription={},this.classboxes=new Map,this.classtemplates=new Map,this.lifelines=new Map,this.components=new Map,this.nodes=new Map,this.actors=new Map,this.usecases=new Map,this.messages=[]}createFromDiv(t,e){let i=JSON.parse($("#"+t).text());$("#"+t).empty();var n=SVG(t).size(this.settings.width,this.settings.height);this.createFromJSON(n,t,i,e)}createFromJSON(t,e,i,n){let s=new m.IDGenerator(e);null==i&&(i={}),this.diagramDescription=i;let r=new o.Style;this.diagramDescription.elements&&this.drawDiagram(t,s,this.diagramDescription.elements,r,n,this.errors)}onMove(t){for(var e=0;e<t.connectionPoints.length;e++){let i=t.connectionPoints[e].connector;i&&(window.alert("rrr"),i.getLayers().getLayer("shape").write(),i.getLayers().getLayer("text").write())}}drawDiagram(t,e,i,n,o,u){this.layoutManager=new s.LayoutManager(o);let d=[],m=[];for(var x=0;x<i.length;x++){let o=i[x];if(o.class){let i=new r.ClassBox(t,e,o.class,this.settings.canMove,n,u);i.setObserver(this),this.classboxes.set(o.class.name,i)}else if(o.classtemplate)this.classtemplates.set(o.classtemplate.name,new a.ClassTemplate(t,e,o.classtemplate,n,u));else if(o.lifeline)this.lifelines.set(o.lifeline.name,new h.Lifeline(t,o.lifeline.name,o.lifeline,n,this.log,u));else if(o.component)this.components.set(o.component.name,new l.Component(t,o.component.name,o.component,n,u));else if(o.node)this.nodes.set(o.node.name,new c.Node(t,e,o.node,n,u));else if(o.actor)this.actors.set(o.actor.name,new g.Actor(t,o.actor.name,o.actor,u));else if(o.usecase)this.usecases.set(o.usecase.title,new y.UseCase(t,o.usecase.title,o.usecase,u));else if(o.relationship){let e,i;"inheritance"==o.relationship.type?(e=this.classboxes.get(o.relationship.derivedclass),null==e&&(e=this.classtemplates.get(o.relationship.derivedclass)),i=this.classboxes.get(o.relationship.baseclass),null==i&&(i=this.classtemplates.get(o.relationship.baseclass))):"composition"!=o.relationship.type&&"aggregation"!=o.relationship.type||(e=this.classboxes.get(o.relationship.containedclass),i=this.classboxes.get(o.relationship.containingclass));let n=e.createConnectionPoint(t),s=i.createConnectionPoint(t),r=new p.Connector(t,o.relationship.type,n,s,null);n.connector=r,s.connector=r,d.push(r)}else if(o.messages)for(let e=0;e<o.messages.length;e++){let i,n=o.messages[e];if(n.synchronousmessage){let e=this.lifelines.get(n.synchronousmessage.caller),o=this.lifelines.get(n.synchronousmessage.callee),s=e.createConnectionPoint(t,"synchronous-start"),r=o.createConnectionPoint(t,"synchronous-end");i=new p.Connector(t,"synchronousmessage",s,r,n.synchronousmessage.name)}else if(n.returnmessage){let e=this.lifelines.get(n.returnmessage.callee),o=this.lifelines.get(n.returnmessage.caller),s=e.createConnectionPoint(t,"return-start"),r=o.createConnectionPoint(t,"return-end");i=new p.Connector(t,"returnmessage",s,r,null)}else if(n.creationmessage){let e=this.lifelines.get(n.creationmessage.caller),o=this.lifelines.get(n.creationmessage.callee),s=e.createConnectionPoint(t,"creation-start"),r=o.createConnectionPoint(t,"creation-end");i=new p.Connector(t,"creationmessage",s,r,null)}else if(n.destructionmessage){let e=this.lifelines.get(n.destructionmessage.callee).createConnectionPoint(t,"destruction-end");i=new p.Connector(t,"destructionmessage",e,e,"")}this.messages.push(i)}else if(o.assemblyconnector){let e=this.components.get(o.assemblyconnector.consumer),i=this.components.get(o.assemblyconnector.provider),n=e.createDependencyConnectionPoint(t,o.assemblyconnector.interface),s=i.createInterfaceConnectionPoint(t,o.assemblyconnector.interface),r=new p.Connector(t,"assemblyconnector",n,s,null);m.push(r)}else if(o.association){let e=this.actors.get(o.association.actor).createConnectionPoint(t),i=this.usecases.get(o.association.usecase).createConnectionPoint(t),n=new p.Connector(t,"usecaseassociation",e,i,null);d.push(n)}else if(o.communicationpath){let e=this.nodes.get(o.communicationpath.firstnode).createConnectionPoint(t),i=this.nodes.get(o.communicationpath.secondnode).createConnectionPoint(t),n=new p.Connector(t,"communicationpath",e,i,null);d.push(n)}}this.layoutManager.doLayout(this),function(t,e,i){null!=e&&t.layoutConnectors(e);if(null!=i)for(var n=0;n<i.length;n++){let t=i[n];t.connectionPoint1.move(t.connectionPoint1.element.component.getSocketConnectionPoint("").x,t.connectionPoint1.element.component.getSocketConnectionPoint("").y),t.connectionPoint2.move(t.connectionPoint2.element.component.getBallConnectionPoint("").x,t.connectionPoint2.element.component.getBallConnectionPoint("").y)}}(this.layoutManager,d,m),function(t,e,i,n,o,s,r,a,l,h){if(null!=t)for(let e of t)e.write();if(null!=e)for(let t of e)t.write();if(null!=i)for(let t of i)t.getLayers().getLayer("shape").write(),t.getLayers().getLayer("text").write();if(null!=n)for(let t of n)t.getLayers().getLayer("shape").write(),t.getLayers().getLayer("text").write();if(null!=o)for(let t of o)t.getLayers().getLayer("shape").write(),t.getLayers().getLayer("text").write();if(null!=s)for(let t of s)t.getLayers().getLayer("shape").write(),t.getLayers().getLayer("text").write();if(null!=r)for(let t of r)t.getLayers().getLayer("shape").write(),t.getLayers().getLayer("text").write();for(var c=0;c<a.length;c++){let t=a[c];t.getLayers().getLayer("shape").write(),t.getLayers().getLayer("text").write()}for(c=0;c<l.length;c++){let t=l[c];t.getLayers().getLayer("shape").write(),t.getLayers().getLayer("text").write()}if(null!=h)for(c=0;c<h.length;c++){let t=h[c];t.getLayers().getLayer("shape").write(),t.getLayers().getLayer("text").write()}}(this.classboxes.values(),this.classtemplates.values(),this.lifelines.values(),this.components.values(),this.nodes.values(),this.actors.values(),this.usecases.values(),d,this.messages,m)}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(0);e.LayoutManager=class{constructor(t){this.layout=t,null==this.layout&&(this.layout={}),null==this.layout.elements&&(this.layout.elements={}),null==this.layout.connectorpositions&&(this.layout.connectorpositions={})}doLayout(t){for(let e of t.classboxes.values())this.setElementPosition(e);for(let e of t.lifelines.values())this.setElementPosition(e);for(let e of t.components.values())this.setElementPosition(e);for(let e of t.nodes.values())this.setElementPosition(e);for(let e of t.actors.values())this.setElementPosition(e);for(let e of t.usecases.values())this.setElementPosition(e);this.layoutMessages(t.lifelines,t.messages)}setElementPosition(t){let e=this.layout.elements[t.id];e&&e.position&&t.move(e.position.x,e.position.y)}layoutConnectors(t){for(var e=0;e<t.length;e++){let i=t[e],o=i.connectionPoint1,s=i.connectionPoint2,r=o.element.getConnectionPointsRectangle(),a=s.element.getConnectionPointsRectangle(),l=this.getConnectionPositions(r,a,i.type),h=o.element.id+"-"+s.element.id+"-"+i.type,c=this.layout.elements[h];if(c&&c.end)switch(c.end){case"top-center":l.end=n.ConnectionPointPosition.TopCenter;break;case"right-center":l.end=n.ConnectionPointPosition.RightCenter;break;case"bottom-center":l.end=n.ConnectionPointPosition.BottomCenter;break;case"left-center":l.end=n.ConnectionPointPosition.LeftCenter}o.setPosition(l.start),s.setPosition(l.end)}}layoutConnector(t){let e=t.connectionPoint1,i=t.connectionPoint2,o=e.element.getConnectionPointsRectangle(),s=i.element.getConnectionPointsRectangle(),r=this.getConnectionPositions(o,s,t.type),a=e.element.id+"-"+i.element.id+"-"+t.type,l=this.layout.elements[a];if(l&&l.end)switch(l.end){case"top-center":r.end=n.ConnectionPointPosition.TopCenter;break;case"right-center":r.end=n.ConnectionPointPosition.RightCenter;break;case"bottom-center":r.end=n.ConnectionPointPosition.BottomCenter;break;case"left-center":r.end=n.ConnectionPointPosition.LeftCenter}e.setPosition(r.start),i.setPosition(r.end)}layoutMessages(t,e){let i=0;for(let e of t.values())i=Math.max(i,e.getFirstConnectionPointPosition().y);let n=!0;for(let t of e){n?(n=!1,t.hasNonEmptyLabel()&&"creationmessage"!=t.type&&(i+=10)):t.hasNonEmptyLabel()&&(i+=16);let e=t.connectionPoint1,o=t.connectionPoint2,s=e.element,r=o.element;if("creationmessage"!=t.type&&"destructionmessage"!=t.type)s!=r?(e.move(s.getLineTopPosition().x,i),o.move(r.getLineTopPosition().x,i),i+=14):(e.move(s.getLineTopPosition().x,i),o.move(r.getLineTopPosition().x,i+20),"returnmessage"!=t.type&&(i+=34));else if("creationmessage"==t.type){r.move(r.x,i);let t=r.getCreationConnectionPointPosition().y;e.move(s.getLineTopPosition().x,t),o.move(r.getCreationConnectionPointPosition().x,t),i+=34}else"destructionmessage"==t.type&&(r.needToAdjustDestructionPosition()?o.move(r.getLineTopPosition().x,i+25):o.move(r.getLineTopPosition().x,i),i+=14)}if(e.length>0)for(let e of t.values())e.doLayout(),e.uptodate=!1;for(let t of e){let e=t.connectionPoint1,i=t.connectionPoint2,n=e.element,o=i.element;if(n==o){let t=e.y,s=e.x+n.getHorizontalOffset(t,"right");e.move(s,t);let r=i.y,a=i.x+o.getHorizontalOffset(r,"right");i.move(a,r)}else if(o.x>=n.x){let t=e.y,s=e.x+n.getHorizontalOffset(t,"right");e.move(s,t);let r=i.y,a=i.x+o.getHorizontalOffset(r,"left");i.move(a,r)}else{let t=e.y,s=e.x+n.getHorizontalOffset(t,"left");e.move(s,t);let r=i.y,a=i.x+o.getHorizontalOffset(r,"right");i.move(a,r)}t.uptodate=!1}}getConnectionPositions(t,e,i){let o={start:n.ConnectionPointPosition.TopCenter,end:n.ConnectionPointPosition.TopCenter};return"usecaseassociation"!=i?e.y+e.height<t.y?(o.start=n.ConnectionPointPosition.TopCenter,o.end=n.ConnectionPointPosition.BottomCenter):t.y+t.height<e.y?(o.start=n.ConnectionPointPosition.BottomCenter,o.end=n.ConnectionPointPosition.TopCenter):e.x+e.width<t.x?(o.start=n.ConnectionPointPosition.LeftCenter,o.end=n.ConnectionPointPosition.RightCenter):t.x+t.width<e.x&&(o.start=n.ConnectionPointPosition.RightCenter,o.end=n.ConnectionPointPosition.LeftCenter):t.x<e.x?(o.start=n.ConnectionPointPosition.RightCenter,o.end=n.ConnectionPointPosition.LeftCenter):t.x>e.x+e.width?(o.start=n.ConnectionPointPosition.LeftCenter,o.end=n.ConnectionPointPosition.RightCenter):t.y<e.y?(o.start=n.ConnectionPointPosition.BottomCenter,o.end=n.ConnectionPointPosition.TopCenter):(o.start=n.ConnectionPointPosition.TopCenter,o.end=n.ConnectionPointPosition.BottomCenter),o}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(1),o=i(2),s=i(0),r=i(13),a=i(4);class l extends n.DiagramElement{constructor(t,e,i,n,o,s){super(t,"classbox",e.createID("classbox--"+i.name)),this.errors=s,this.shapeLayer=this.layers.createLayer("shape"),this.textLayer=this.layers.createLayer("text"),this.classDescription=i,this.canMove=n,this.style=o,this.connectionPointsRectangle=null,this.connectionPoints=[]}setObserver(t){this.observer=t}write(){this.update();let t=this.layers.svg.group().addClass("codesmithy-uml-diagram__classbox");t.id(this.id),this.layers.getLayer("shape").write(t),this.layers.getLayer("text").write(t),this.canMove&&(t.draggable(!0),t.on("dragmove",t=>{this.observer.onMove(this)}))}createConnectionPoint(t){let e=new o.ConnectionPoint(t,this,s.ConnectionPointPosition.BottomCenter,this.errors);return this.connectionPoints.push(e),e}doUpdate(){!function(t,e,i){var n=t.shapeLayer.group().addClass("classbox__shape");let o={width:0,height:0},s={top:t.y+1,left:t.x+1};o.height=i.getTopMargin("codesmithy-uml-diagram__classbox");var l=t.textLayer.group().addClass("classbox__class-name-compartment"),h=a.SVGUtils.Text(l,s.left+i.getLeftMargin("codesmithy-uml-diagram__classbox"),s.top+o.height,e.name);o.width=Math.max(o.width,h.bbox().width),o.height+=h.bbox().height+i.getBottomMargin("codesmithy-uml-diagram__classbox");var c=s.top+o.height;let g=r.DrawingUtilities.addClassCompartmentText(s.left,c,t.textLayer,i,e.attributes,"classbox__attributes-compartment");o.width=Math.max(o.width,g.width),o.height+=g.height;var y=s.top+o.height;let p=r.DrawingUtilities.addClassCompartmentText(s.left,y,t.textLayer,i,e.operations,"classbox__operations-compartment");o.width=Math.max(o.width,p.width),o.height+=p.height,o.width>h.bbox().width&&h.dx((o.width-h.bbox().width)/2);o.width+=i.getLeftMargin("codesmithy-uml-diagram__classbox")+i.getRightMargin("codesmithy-uml-diagram__classbox");let u=a.SVGUtils.Rectangle(n,s.left,s.top,o.width,o.height);a.SVGUtils.Line(n,s.left,c,s.left+o.width,c),a.SVGUtils.Line(n,s.left,y,s.left+o.width,y),t.connectionPointsRectangle=u.bbox()}(this,this.classDescription,this.style)}doGetConnectionPointsRectangle(){return this.connectionPointsRectangle}fire(t){"positionchanged"==t&&(window.alert("juju"),this.observer.onMove(this))}}e.ClassBox=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function n(t,e){let i={public:"+ ",protected:"# ",private:"- "}[e.visibility]+e.name;return e.return&&(i+=" : "+e.return),t.text(i)}e.DrawingUtilities=class{static addClassCompartmentText(t,e,i,o,s,r){e+=o.getTopMargin("classbox");let a=function(t,e,i,o,s){let r=0,a=0,l=i.group().addClass(s);for(var h=0;h<o.length;h++){let i=n(l,o[h]);i.move(t,e+a),r=Math.max(r,i.bbox().width),a+=i.bbox().height}return{width:r,height:a}}(t+o.getLeftMargin("classbox"),e,i,s,r);return a.height+=o.getTopMargin("classbox")+o.getBottomMargin("classbox"),a}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(1),o=i(2),s=i(0),r=i(13),a=i(4);class l extends n.DiagramElement{constructor(t,e,i,n,o){super(t,"classtemplate",e.createID("classtemplate--"+i.name)),this.errors=o,this.shapeLayer=this.layers.createLayer("shape"),this.textLayer=this.layers.createLayer("text"),this.classTemplateDescription=i,this.style=n,this.connectionPointsRectangle=null,this.connectionPoints=[]}write(){this.update();let t=this.layers.svg.group().addClass("codesmithy-uml-diagram__classtemplate");t.id(this.id),this.layers.getLayer("shape").write(t),this.layers.getLayer("text").write(t)}createConnectionPoint(t){let e=new o.ConnectionPoint(t,this,s.ConnectionPointPosition.BottomCenter,this.errors);return this.connectionPoints.push(e),e}doUpdate(){var t=this.shapeLayer.group().addClass("classtemplate__shape");let e={width:0,height:0},i={top:this.y+1,left:this.x+1};var n=this.textLayer.group().addClass("classtemplate__parameters-compartment"),o=a.SVGUtils.Text(n,i.left+this.style.getLeftMargin("classtemplate__parameters-compartment"),i.top+this.style.getTopMargin("classtemplate__parameters-compartment"),this.classTemplateDescription.parameters[0]);let s=this.style.getLeftMargin("classtemplate__parameters-compartment")+this.style.getRightMargin("classtemplate__parameters-compartment")+o.bbox().width,l=this.style.getTopMargin("classtemplate__parameters-compartment")+this.style.getBottomMargin("classtemplate__parameters-compartment")+o.bbox().height,h=i.top+this.style.getTopMargin("classtemplate__parameters-compartment")+o.bbox().height/2,c=h+this.style.getTopMargin("codesmithy-uml-diagram__classtemplate"),g=this.textLayer.group().addClass("classtemplate__class-name-compartment"),y=a.SVGUtils.Text(g,i.left+this.style.getLeftMargin("codesmithy-uml-diagram__classtemplate"),c,this.classTemplateDescription.name);e.width=Math.max(e.width,y.bbox().width),e.height=this.style.getTopMargin("codesmithy-uml-diagram__classtemplate")+y.bbox().height+this.style.getBottomMargin("codesmithy-uml-diagram__classtemplate");let p=i.top+e.height+o.bbox().height/2,u=r.DrawingUtilities.addClassCompartmentText(i.left,p,this.textLayer,this.style,this.classTemplateDescription.attributes,"classtemplate__attributes-compartment");e.width=Math.max(e.width,u.width),e.height+=u.height;let d=i.top+e.height+o.bbox().height/2,m=r.DrawingUtilities.addClassCompartmentText(i.left,d,this.textLayer,this.style,this.classTemplateDescription.operations,"classtemplate__operations-compartment");e.width=Math.max(e.width,m.width),e.height+=m.height,e.width>y.bbox().width&&y.dx((e.width-y.bbox().width)/2),e.width+=this.style.getLeftMargin("codesmithy-uml-diagram__classtemplate")+this.style.getRightMargin("codesmithy-uml-diagram__classtemplate");let x=a.SVGUtils.Rectangle(t,i.left,h,e.width,e.height);a.SVGUtils.Line(t,i.left,p,i.left+e.width,p),a.SVGUtils.Line(t,i.left,d,i.left+e.width,d),o.dx(e.width-s/2);a.SVGUtils.Rectangle(t,i.left+e.width-s/2,i.top,s,l).attr("stroke-dasharray","4, 4");this.connectionPointsRectangle=x.bbox()}doGetConnectionPointsRectangle(){return this.connectionPointsRectangle}}e.ClassTemplate=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(1),o=i(25),s=i(26),r=i(2),a=i(0);class l{constructor(t){this.svgParentGroup=t,this.x=0,this.y=0,this.width=15,this.height=20}move(t,e){this.x=t,this.y=e}draw(){let t=this.svgParentGroup.group().addClass("UMLComponentStereotype");t.rect(11,15).move(4+this.x,this.y),t.rect(8,3).move(this.x,this.y+3),t.rect(8,3).move(this.x,this.y+9)}}class h extends n.DiagramElement{constructor(t,e,i,n,r){if(super(t,"component",e),this.errors=r,this.shapeLayer=this.layers.createLayer("shape"),this.textLayer=this.layers.createLayer("text"),this.svg=t,this.componentDescription=i,this.style=n,this.ballConnectors=[],this.socketConnectors=[],this.componentDescription.interfaces)for(let t=0;t<this.componentDescription.interfaces.length;t++){let e=new o.BallConnector(this.svg,this,this.componentDescription.interfaces[t].name);this.ballConnectors.push(e)}if(this.componentDescription.dependencies)for(let t=0;t<this.componentDescription.dependencies.length;t++){let e=new s.SocketConnector(this.svg,this,this.componentDescription.dependencies[t].name);this.socketConnectors.push(e)}}getSocketConnector(t){for(var e=0;e<this.socketConnectors.length;e++)if(this.socketConnectors[e].name==t)return this.socketConnectors[e];return null}getBallConnector(t){for(var e=0;e<this.ballConnectors.length;e++)if(this.ballConnectors[e].name==t)return this.ballConnectors[e];return null}createDependencyConnectionPoint(t,e){return new r.ConnectionPoint(t,this.getSocketConnector(e),a.ConnectionPointPosition.BottomCenter,this.errors)}createInterfaceConnectionPoint(t,e){return new r.ConnectionPoint(t,this.getBallConnector(e),a.ConnectionPointPosition.BottomCenter,this.errors)}doUpdate(){this.layers.clearEachLayer();var t=this.shapeLayer.group().addClass("UMLComponent");let e=0;for(let t=0;t<this.ballConnectors.length;t++)e=Math.max(e,this.ballConnectors[t].width);let i={x:this.x+1,y:this.y+1},n={width:0,height:0};n.height=this.style.getTopMargin("component");let o=new l(t);n.height+=o.height;var s=this.textLayer.group().addClass("UMLComponentName").text(this.componentDescription.name).addClass("UMLComponentName").move(i.x+e+this.style.getLeftMargin("component"),i.y+n.height);n.width=Math.max(n.width,s.bbox().width),n.height+=s.bbox().height+this.style.getBottomMargin("component"),n.width+=this.style.getLeftMargin("component")+this.style.getRightMargin("component"),t.rect(n.width,n.height).move(i.x+e,i.y),o.move(i.x+e+(n.width-this.style.getRightMargin("component")-o.width),i.y+this.style.getTopMargin("component")),o.draw();for(let t=0;t<this.ballConnectors.length;t++)this.ballConnectors[t].moveConnectionPoint(i.x,i.y+n.height/2),this.layers.merge(this.ballConnectors[t].getLayers());for(let t=0;t<this.socketConnectors.length;t++)this.socketConnectors[t].moveConnectionPoint(i.x+n.width+e,i.y+n.height/2),this.layers.merge(this.socketConnectors[t].getLayers())}getBallConnectionPoint(t){this.uptodate||this.update();for(let t=0;t<this.ballConnectors.length;t++)return this.ballConnectors[t].getAssemblyConnectionPoint()}getSocketConnectionPoint(t){this.uptodate||this.update();for(let t=0;t<this.socketConnectors.length;t++)return this.socketConnectors[t].getAssemblyConnectionPoint()}}e.Component=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(1),o=i(2),s=i(0),r=i(17),a=i(4),l=i(5);class h extends n.DiagramElement{constructor(t,e,i,n,o,s){super(t,"lifeline",e),this.errors=s,this.shapeLayer=this.layers.createLayer("shape"),this.textLayer=this.layers.createLayer("text"),this.svg=t,this.lifelineDescription=i,this.style=n,this.log=o,this.lineTopPosition={x:0,y:0},this.boxHeight=0,this.connectionPoints=[],this.adjustmentNeeded=!1,this.lifelineLayout=new r.LifelineLayout}createConnectionPoint(t,e){let i=new o.ConnectionPoint(t,this,s.ConnectionPointPosition.BottomCenter,this.errors);return this.connectionPoints.push({point:i,type:e}),i}getLineTopPosition(){return this.uptodate||this.update(),this.lineTopPosition}getFirstConnectionPointPosition(){let t=this.getLineTopPosition();return t.y+=this.style.getExecutionSpecificationBarMargin()+this.style.getExecutionSpecificationBarOverhang(),t}getCreationConnectionPointPosition(){return this.uptodate||this.update(),{x:this.x,y:this.y+this.boxHeight/2}}getActiveLineWidth(){return this.style.getExecutionSpecificationBarWidth()}getHorizontalOffset(t,e){let i=0;return"right"==e?i=this.lifelineLayout.getDepth(t)*(this.getActiveLineWidth()/2):"left"==e&&(i=-this.lifelineLayout.getDepth(t)*(this.getActiveLineWidth()/2)),i}needToAdjustDestructionPosition(){return this.connectionPoints.length>1&&"return-start"!=this.connectionPoints[this.connectionPoints.length-1].type&&"creation-end"!=this.connectionPoints[this.connectionPoints.length-1].type&&(this.adjustmentNeeded=!0),this.adjustmentNeeded}doLayout(){this.lifelineLayout.dolayout(this.connectionPoints,this.adjustmentNeeded)}doUpdate(){this.log.info("Lifeline "+this.id+": updating"),this.layers.clearEachLayer();let t=this.shapeLayer.group().addClass("UMLLifeline");!function(t,e,i,n,o){let s={width:0,height:0},r={top:t.y+1,left:t.x+1};s.height=n.getTopMargin("lifeline");var l=t.textLayer.group().addClass("UMLInstanceName").text(":"+i.name).move(r.left+n.getLeftMargin("lifeline"),r.top+s.height);s.width=Math.max(s.width,l.bbox().width),s.height+=l.bbox().height+n.getBottomMargin("lifeline"),s.width+=n.getLeftMargin("lifeline")+n.getRightMargin("lifeline"),a.SVGUtils.Rectangle(e,r.left,r.top,s.width,s.height),t.boxHeight=s.height,o.x=r.left+s.width/2,o.y=r.top+s.height}(this,t,this.lifelineDescription,this.style,this.lineTopPosition),function(t,e,i,n,o){let s=o.getExecutionSpecificationBarOverhang(),r="Lifeline "+t.id+": depth changes: [";for(let t of n)r+=" "+t[1];if(r+=" ]",t.log.debug(r),1==n.length)n[0][1]>0?(a.SVGUtils.Line(e,t.lineTopPosition.x,t.lineTopPosition.y,t.lineTopPosition.x,n[0][0]-s),a.SVGUtils.Rectangle(e,t.lineTopPosition.x-4,n[0][0]-s,8,2*s)):a.SVGUtils.Line(e,t.lineTopPosition.x,t.lineTopPosition.y,t.lineTopPosition.x,n[0][0]);else if(n.length>1){a.SVGUtils.Line(e,t.lineTopPosition.x,t.lineTopPosition.y,t.lineTopPosition.x,n[0][0]-s);let i=0;for(let t of n)i=Math.max(i,t[1]);let o=[],r=[];for(let e=0;e<=i;e++)o.push(-1),r.push(new l.SVGLayer(t.svg));for(let e=1;e<n.length;e++){let i=n[e-1][1],a=n[e][1];if(t.log.trace("Lifeline "+t.id+": handling depth change "+e+" from "+i+" to "+a),0==i)t.log.trace("Lifeline "+t.id+": drawing line"),r[i].line(t.lineTopPosition.x,n[e-1][0],t.lineTopPosition.x,n[e][0]);else if(a>i)t.log.trace("Lifeline "+t.id+": deferring drawing"),o[i]=n[e-1][0];else if(a<=i){t.log.trace("Lifeline "+t.id+": drawing rectangle");let a=n[e-1][0];-1!=o[i]&&(a=o[i]);let l=5*(i-1);r[i].rect(8,n[e][0]-a+2*s).move(t.lineTopPosition.x-4+l,a-s),o[i]=-1}}0==n[n.length-2][1]&&n[n.length-1][1]>0&&r[n[n.length-1][1]].rect(8,2*s).move(t.lineTopPosition.x-4,n[n.length-1][0]-s);let h=n[n.length-1][0];for(let e=0;e<o.length;e++)-1!=o[e]&&r[e].rect(8,h-o[e]+2*s).move(t.lineTopPosition.x-4,o[e]-s);for(let t=0;t<r.length;t++)r[t].write(e)}}(this,t,this.lifelineDescription,this.lifelineLayout.depthChanges,this.style)}}e.Lifeline=h},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function n(t,e){t.push([e,1]),a(t)}function o(t,e){0==t.length?t.push([e,1]):t.push([e,t[t.length-1][1]+1]),a(t)}function s(t,e){let i=0,n=t.length;n>0&&(i=Math.max(0,t[n-1][1]-1)),t.push([e,i]),a(t)}function r(t,e){let i=t.length;0==i?t.push([e,1]):t.push([e,t[i-1][1]]),a(t)}function a(t){let e=t.length;e>=3&&t[e-3][1]==t[e-2][1]&&(t[e-2][0]=t[e-1][0],t[e-2][1]=t[e-1][1],t.pop())}e.LifelineLayout=class{constructor(){this.depthChanges=[]}getDepth(t){let e=0,i=-1;for(let n=0;n<this.depthChanges.length&&t>=this.depthChanges[n][0];n++)e=this.depthChanges[n][1],i=t>this.depthChanges[n][0]?n:n-1;return i>=0&&(e=Math.max(e,this.depthChanges[i][1])),e}dolayout(t,e){this.depthChanges.length=0;for(let l=0;l<t.length;l++){let h=t[l];switch(h.type){case"synchronous-start":n(this.depthChanges,h.point.y);break;case"synchronous-end":o(this.depthChanges,h.point.y);break;case"return-start":s(this.depthChanges,h.point.y);break;case"return-end":r(this.depthChanges,h.point.y);break;case"creation-start":n(this.depthChanges,h.point.y);break;case"destruction-end":e&&s(this.depthChanges,h.point.y-25),i=this.depthChanges,a=h.point.y,i.push([a,0])}}var i,a}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(1),o=i(2),s=i(0),r=i(10);class a extends n.DiagramElement{constructor(t,e,i,n,o){super(t,"node",e.createID("node--"+i.name)),this.errors=o,this.shapeLayer=this.layers.createLayer("shape"),this.textLayer=this.layers.createLayer("text"),this.nodeDescription=i,this.style=n,this.connectionPointsRectangle=null}createConnectionPoint(t){return new o.ConnectionPoint(t,this,s.ConnectionPointPosition.BottomCenter,this.errors)}doUpdate(){var t=this.shapeLayer.group().addClass("UMLNode");let e={width:0,height:0},i={top:this.y+1,left:this.x+1};e.height=this.style.getTopMargin("node");var n=this.textLayer.group().addClass("UMLNodeName").text(this.nodeDescription.name).move(i.left+this.style.getLeftMargin("node"),i.top+e.height+10);if(e.width=Math.max(e.width,n.bbox().width),e.height+=n.bbox().height+this.style.getBottomMargin("node"),e.width>n.bbox().width&&n.dx((e.width-n.bbox().width)/2),null!=this.nodeDescription.elements&&this.nodeDescription.elements.length>0){new r.Diagram(null).createFromJSON(this.layers.svg,this.id,this.nodeDescription,null)}e.width+=this.style.getLeftMargin("node")+this.style.getRightMargin("node");let o=i.left+12+","+i.top,s=i.left+e.width+10+","+i.top,a=i.left+e.width+","+(i.top+10),l=i.left+","+(i.top+10);t.polygon(o+" "+s+" "+a+" "+l);let h=i.left+e.width+","+(i.top+e.height+10),c=i.left+e.width+10+","+(i.top+e.height-1);t.polygon(s+" "+a+" "+h+" "+c);let g=t.rect(e.width,e.height).move(i.left,i.top+10);this.connectionPointsRectangle=g.bbox(),this.connectionPointsRectangle.cy-=5,this.connectionPointsRectangle.width+=5}doGetConnectionPointsRectangle(){return this.connectionPointsRectangle}}e.Node=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(1),o=i(2),s=i(0);class r extends n.DiagramElement{constructor(t,e,i,n){super(t,"actor",e),this.errors=n,this.shapeLayer=this.layers.createLayer("shape"),this.textLayer=this.layers.createLayer("text"),this.actorDescription=i,this.connectionPointsRectangle=null}createConnectionPoint(t){return new o.ConnectionPoint(t,this,s.ConnectionPointPosition.BottomCenter,this.errors)}doUpdate(){let t={top:this.y,left:this.x},e=this.shapeLayer.group().addClass("UMLActor"),i=this.textLayer.group().text(this.actorDescription.name).move(t.left,t.top+35),n=i.bbox().width,o=(n-16)/2;e.circle(12).move(t.left+2+o,t.top+1),e.line(t.left+8+o,t.top+13,t.left+8+o,t.top+26),e.line(t.left+o,t.top+18,t.left+16+o,t.top+18),e.line(t.left+8+o,t.top+26,t.left+o,t.top+33),e.line(t.left+8+o,t.top+26,t.left+16+o,t.top+33),this.connectionPointsRectangle={x:t.left,y:t.top,w:n,width:n,height:35+i.bbox().height,h:35+i.bbox().height,x2:t.left+n,y2:t.top+35+i.bbox().height,cx:t.left+n/2,cy:t.top+(35+i.bbox().height)/2}}doGetConnectionPointsRectangle(){return this.connectionPointsRectangle}}e.Actor=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(1),o=i(2),s=i(0);class r extends n.DiagramElement{constructor(t,e,i,n){super(t,"usecase",e),this.errors=n,this.shapeLayer=this.layers.createLayer("shape"),this.textLayer=this.layers.createLayer("text"),this.useCaseDescription=i,this.connectionPointsRectangle=null}createConnectionPoint(t){return new o.ConnectionPoint(t,this,s.ConnectionPointPosition.BottomCenter,this.errors)}doUpdate(){let t=this.y,e=this.x,i=this.shapeLayer.group().addClass("UMLUseCase"),n=this.textLayer.group().text(this.useCaseDescription.title),o=i.ellipse(1.2*n.bbox().width,3*n.bbox().height).move(e+1,t+1);n.move(e+1+.1*n.bbox().width,t+1+n.bbox().height),this.connectionPointsRectangle=o.bbox()}doGetConnectionPointsRectangle(){return this.connectionPointsRectangle}}e.UseCase=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(1),o=i(0),s=i(27),r=i(4);class a extends n.DiagramElement{constructor(t,e,i,n,o){super(t,null,null),this.shapeLayer=this.layers.createLayer("shape"),this.textLayer=this.layers.createLayer("text"),this.type=e,this.connectionPoint1=i,this.connectionPoint2=n,this.label=null,null!=o&&(this.label=new s.Label(o)),null==this.label&&"creationmessage"==e&&(this.label=new s.Label("new"))}hasNonEmptyLabel(){return null!=this.label&&!this.label.empty()}doUpdate(){if(this.layers.clearEachLayer(),"inheritance"==this.type){!function(t,e,i){let n=u(i.position),o=function(t,e){let i={x:0,y:0};switch(e){case p:i={x:t.x-12,y:t.y};break;case y:i={x:t.x+12,y:t.y};break;case c:i={x:t.x,y:t.y+12};break;case g:i={x:t.x,y:t.y-12}}return i}(i,n);d(t,e,o,n),function(t,e,i){let n={x:0,y:0},o={x:0,y:0};switch(i){case p:n={x:e.x-12,y:e.y-10},o={x:e.x-12,y:e.y+10};break;case y:n.x=e.x+12,n.y=e.y-10,o.x=e.x+12,o.y=e.y+10;break;case c:n.x=e.x-10,n.y=e.y+12,o.x=e.x+10,o.y=e.y+12;break;case g:n.x=e.x-10,n.y=e.y-12,o.x=e.x+10,o.y=e.y-12}let s=e.x+","+e.y+" "+n.x+","+n.y+" "+o.x+","+o.y;r.SVGUtils.Polygon(t,s)}(t,i,n)}(this.shapeLayer.group().addClass("UMLInheritanceRelationship"),this.connectionPoint1,this.connectionPoint2)}else if("composition"==this.type){l(this.shapeLayer.group().addClass("UMLCompositionRelationship"),this.connectionPoint1,this.connectionPoint2)}else if("aggregation"==this.type){l(this.shapeLayer.group().addClass("UMLAggregationRelationship"),this.connectionPoint1,this.connectionPoint2)}else if("synchronousmessage"==this.type){let t=this.shapeLayer.group().addClass("UMLSynchronousMessage"),e=null;null!=this.label&&null!=this.label.text&&""!=this.label.text&&(e=this.textLayer.group()),h(t,e,this.connectionPoint1,this.connectionPoint2,this.label)}else if("returnmessage"==this.type){if(null!=this.connectionPoint1.element&&this.connectionPoint1.element!=this.connectionPoint2.element){!function(t,e,i){r.SVGUtils.Line(t,e.x,e.y,i.x,e.y).attr("stroke-dasharray","4, 4"),i.x>=e.x?(r.SVGUtils.Line(t,i.x,e.y,i.x-10,i.y-6),r.SVGUtils.Line(t,i.x,e.y,i.x-10,i.y+6)):(r.SVGUtils.Line(t,i.x,e.y,i.x+10,i.y-6),r.SVGUtils.Line(t,i.x,e.y,i.x+10,i.y+6))}(this.shapeLayer.group().addClass("UMLReturnMessage"),this.connectionPoint1,this.connectionPoint2)}}else if("creationmessage"==this.type){h(this.shapeLayer.group().addClass("UMLCreationMessage"),this.textLayer.group(),this.connectionPoint1,this.connectionPoint2,this.label)}else if("destructionmessage"==this.type){!function(t,e){t.line(e.x-10,e.y-10,e.x+10,e.y+10),t.line(e.x-10,e.y+10,e.x+10,e.y-10)}(this.shapeLayer.group().addClass("UMLDestructionMessage"),this.connectionPoint2)}else if("usecaseassociation"==this.type){!function(t,e,i){t.line(e.x,e.y,i.x,i.y)}(this.shapeLayer.group().addClass("UMLUseCaseAssociation"),this.connectionPoint1,this.connectionPoint2)}else if("assemblyconnector"==this.type){!function(t,e,i){if(e.x<i.x)t.line(e.x,e.y,i.x,i.y).attr("stroke-dasharray","8, 4");else{let n=e.y+(i.y-e.y)/2;t.line(e.x,e.y,e.x+25,e.y).attr("stroke-dasharray","8, 4"),t.line(e.x+25,e.y,e.x+25,n).attr("stroke-dasharray","8, 4"),t.line(e.x+25,n,i.x-35,n).attr("stroke-dasharray","8, 4"),t.line(i.x-35,n,i.x-35,i.y).attr("stroke-dasharray","8, 4"),t.line(i.x-35,i.y,i.x,i.y).attr("stroke-dasharray","8, 4")}t.line(i.x-13,i.y+5,i.x,i.y),t.line(i.x-13,i.y-5,i.x,i.y)}(this.shapeLayer.group().addClass("UMLAssemblyConnector"),this.connectionPoint1,this.connectionPoint2)}else if("communicationpath"==this.type){!function(t,e,i){t.line(e.x,e.y,i.x,i.y)}(this.shapeLayer.group().addClass("UMLCommunicationPath"),this.connectionPoint1,this.connectionPoint2)}}}function l(t,e,i){let n=u(i.position);d(t,e,function(t,e){let i={x:0,y:0};switch(e){case p:i={x:t.x-20,y:t.y};break;case y:i={x:t.x+20,y:t.y};break;case c:i={x:t.x,y:t.y+20};break;case g:i={x:t.x,y:t.y-20}}return i}(i,n),n),function(t,e,i){let n={x:0,y:0},o={x:0,y:0},s={x:0,y:0};switch(i){case p:n={x:e.x-10,y:e.y-8},o={x:e.x-20,y:e.y},s={x:e.x-10,y:e.y+8};break;case y:n={x:e.x+10,y:e.y-8},o={x:e.x+20,y:e.y},s={x:e.x+10,y:e.y+8};break;case c:n={x:e.x+8,y:e.y+10},o={x:e.x,y:e.y+20},s={x:e.x-8,y:e.y+10};break;case g:n={x:e.x+8,y:e.y-10},o={x:e.x,y:e.y-20},s={x:e.x-8,y:e.y-10}}let r=e.x+","+e.y+" "+n.x+","+n.y+" "+o.x+","+o.y+" "+s.x+","+s.y;t.polygon(r)}(t,i,n)}function h(t,e,i,n,o){if(null!=i.element&&i.element==n.element){if(null!=e&&null!=o&&null!=o.text&&""!=o.text){let t=e.text(o.text);t.move(i.x+8,i.y-t.bbox().height-3)}t.line(i.x,i.y,i.x+30,i.y),t.line(i.x+30,i.y,i.x+30,n.y),t.line(i.x+30,n.y,n.x+12,n.y);let s=n.x+","+n.y+" "+(n.x+12)+","+(n.y-6)+" "+(n.x+12)+","+(n.y+6);r.SVGUtils.Polygon(t,s)}else if(i.x<n.x){if(null!=e&&null!=o&&null!=o.text&&""!=o.text){let t=e.text(o.text),s=n.x-i.x;t.bbox().width<s?t.move(i.x+(s-t.bbox().width)/2,i.y-t.bbox().height-2):t.move(i.x+2,i.y-6-t.bbox().height-2)}t.line(i.x,i.y,n.x-12,n.y);let s=n.x-12+","+(n.y-6)+" "+n.x+","+n.y+" "+(n.x-12)+","+(n.y+6);r.SVGUtils.Polygon(t,s)}else if(i.x>n.x){if(null!=e&&null!=o&&null!=o.text&&""!=o.text){let t=e.text(o.text),s=i.x-n.x;t.bbox().width<s?t.move(n.x+(s-t.bbox().width)/2,n.y-t.bbox().height-2):t.move(n.x+2,n.y-6-t.bbox().height-2)}t.line(i.x,i.y,n.x+12,n.y);let s=n.x+12+","+(n.y-6)+" "+n.x+","+n.y+" "+(n.x+12)+","+(n.y+6);r.SVGUtils.Polygon(t,s)}else{if(null!=e&&null!=o&&null!=o.text&&""!=o.text){let t=e.text(o.text);t.move(i.x+8,i.y-t.bbox().height-3)}t.line(i.x,i.y,i.x+30,i.y),t.line(i.x+30,i.y,n.x+30,n.y),t.line(n.x+30,n.y,n.x+12,n.y);let s=n.x+","+n.y+" "+(n.x+12)+","+(n.y-6)+" "+(n.x+12)+","+(n.y+6);r.SVGUtils.Polygon(t,s)}}e.Connector=a;var c=0,g=1,y=2,p=3;function u(t){switch(t){case o.ConnectionPointPosition.TopCenter:return g;case o.ConnectionPointPosition.RightCenter:return y;case o.ConnectionPointPosition.BottomCenter:return c;case o.ConnectionPointPosition.LeftCenter:return p;default:throw new Error("Invalid value for ConnectionPointPosition")}}function d(t,e,i,n){switch(n){case c:case g:switch(function(t,e,i){let n=m.Straight;n=e.x==t.x?m.Straight:i==g&&t.position==o.ConnectionPointPosition.RightCenter?m.TopRightCorner:i==g&&t.position==o.ConnectionPointPosition.LeftCenter?m.TopLeftCorner:i==c&&t.position==o.ConnectionPointPosition.RightCenter?m.BottomRightCorner:i==c&&t.position==o.ConnectionPointPosition.LeftCenter?m.BottomLeftCorner:m.HorizontalStep;return n}(e,i,n)){case m.Straight:r.SVGUtils.Line(t,e.x,e.y,i.x,i.y);break;case m.TopRightCorner:case m.TopLeftCorner:case m.BottomRightCorner:case m.BottomLeftCorner:r.SVGUtils.Line(t,e.x,e.y,i.x,e.y),r.SVGUtils.Line(t,i.x,e.y,i.x,i.y);break;case m.HorizontalStep:let n=i.y+(e.y-i.y)/2;r.SVGUtils.Line(t,e.x,e.y,e.x,n),r.SVGUtils.Line(t,e.x,n,i.x,n),r.SVGUtils.Line(t,i.x,n,i.x,i.y)}break;case y:case p:switch(function(t,e,i){let n=m.Straight;n=e.y==t.y?m.Straight:i==p&&t.position==o.ConnectionPointPosition.BottomCenter?m.BottomLeftCorner:i==p&&t.position==o.ConnectionPointPosition.TopCenter?m.TopLeftCorner:i==y&&t.position==o.ConnectionPointPosition.BottomCenter?m.BottomRightCorner:i==y&&t.position==o.ConnectionPointPosition.TopCenter?m.TopRightCorner:m.VerticalStep;return n}(e,i,n)){case m.Straight:r.SVGUtils.Line(t,e.x,e.y,i.x,i.y);break;case m.TopRightCorner:case m.TopLeftCorner:case m.BottomRightCorner:case m.BottomLeftCorner:r.SVGUtils.Line(t,e.x,e.y,e.x,i.y),r.SVGUtils.Line(t,e.x,i.y,i.x,i.y);break;case m.VerticalStep:let n=i.x+(e.x-i.x)/2;r.SVGUtils.Line(t,e.x,e.y,n,e.y),r.SVGUtils.Line(t,n,e.y,n,i.y),r.SVGUtils.Line(t,n,i.y,i.x,i.y)}}}var m={Straight:0,TopRightCorner:1,TopLeftCorner:2,BottomRightCorner:3,BottomLeftCorner:4,HorizontalStep:5,VerticalStep:6}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Metrics=class{constructor(){}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Log=class{constructor(t){switch(t){case"none":this.level=0;break;case"error":this.level=1;break;case"warn":this.level=2;break;case"info":this.level=3;break;case"debug":this.level=4;break;case"trace":this.level=5}}error(t){this.level>=1&&console.error(t)}warn(t){this.level>=2&&console.warn(t)}info(t){this.level>=3&&console.log(t)}debug(t){this.level>=4&&console.log(t)}trace(t){this.level>=5&&console.log(t)}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(6);e.Errors=n.Errors,e.UMLWebWidgetError=n.UMLWebWidgetError;const o=i(7);e.IDGenerator=o.IDGenerator;const s=i(8);e.Settings=s.Settings;const r=i(9);e.Style=r.Style;const a=i(10);e.Diagram=a.Diagram;const l=i(2);e.ConnectionPoint=l.ConnectionPoint;const h=i(0);e.ConnectionPointPosition=h.ConnectionPointPosition;const c=i(1);e.DiagramElement=c.DiagramElement;const g=i(21);e.Connector=g.Connector;const y=i(11);e.LayoutManager=y.LayoutManager;const p=i(17);e.LifelineLayout=p.LifelineLayout;const u=i(12);e.ClassBox=u.ClassBox;const d=i(14);e.ClassTemplate=d.ClassTemplate;const m=i(16);e.Lifeline=m.Lifeline;const x=i(19);e.Actor=x.Actor;const f=i(20);e.UseCase=f.UseCase;const P=i(15);e.Component=P.Component;const C=i(18);e.Node=C.Node;const b=i(28);e.Note=b.Note;const L=i(5);e.SVGLayer=L.SVGLayer;const w=i(3);e.SVGLayerSet=w.SVGLayerSet;const v=i(23);e.Log=v.Log;const M=i(22);e.Metrics=M.Metrics},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(3);var o=Symbol();e.BallConnector=class{constructor(t,e,i){this.svg=t,this.layers=new n.SVGLayerSet(t),this.shapeLayer=this.layers.createLayer("shape"),this.textLayer=this.layers.createLayer("text"),this.uptodate=!1,this.x=0,this.y=0,this.component=e,this.name=i,this.textGroup=this.textLayer.group(),this[o]=this.textGroup.text(this.name).move(0,0),this.width=this[o].bbox().width+5}getLayers(){return this.uptodate||this.update(),this.layers}move(t,e){this.uptodate=!1,this.x=t,this.y=e}moveConnectionPoint(t,e){this.uptodate=!1,e-=this[o].bbox().height+3,this.move(t,e)}update(){this.shapeLayer.clear(),this[o].move(this.x,this.y);let t=this.shapeLayer.group().addClass("UMLComponent");t.circle(10).move(this.x+this.width/2-5,this.y+22),t.line(this.x+10+this.width/2-5,this.y+27,this.x+this.width,this.y+27)}getAssemblyConnectionPoint(){return{x:this.x+this.width/2-4,y:this.y+this[o].bbox().height+5}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(3);var o=Symbol();e.SocketConnector=class{constructor(t,e,i){this.svg=t,this.layers=new n.SVGLayerSet(t),this.shapeLayer=this.layers.createLayer("shape"),this.textLayer=this.layers.createLayer("text"),this.uptodate=!1,this.x=0,this.y=0,this.component=e,this.name=i,this.textGroup=this.textLayer.group(),this[o]=this.textGroup.text(this.name).move(0,0),this.width=this[o].bbox().width+5}getLayers(){return this.uptodate||this.update(),this.layers}move(t,e){this.uptodate=!1,this.x=t,this.y=e}moveConnectionPoint(t,e){this.uptodate=!1,e-=this[o].bbox().height+6,this.move(t,e)}update(){this.shapeLayer.clear(),this[o].move(this.x+5,this.y);let t=this.shapeLayer.group().addClass("UMLComponent");t.line(this.x,this.y+this[o].bbox().height+8,this.x+this.width/2,this.y+this[o].bbox().height+8);let e=this.svg.clip();e.rect(10,17).move(this.x+this.width/2-1,this.y+this[o].bbox().height,0),t.circle(15).move(this.x+this.width/2,this.y+this[o].bbox().height+1).clipWith(e),this.uptodate=!0}getAssemblyConnectionPoint(){return{x:this.x+this.width/2-1+10,y:this.y+this[o].bbox().height+8}}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.Label=class{constructor(t){this.text=t}empty(){return null==this.text||""==this.text}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=i(1);class o extends n.DiagramElement{constructor(t,e,i,n){super(t,null,null),this.shapeLayer=this.layers.createLayer("shape"),this.textLayer=this.layers.createLayer("text"),this.noteDescription=i,this.style=n}update(){this.uptodate=!0}}e.Note=o}])}));